<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>SafraSmart - NDVI</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
  </head>
  <body>
    <!-- Upload landing page -->
    <div class="landing">
      <div class="landing-card">
        <!-- Brand -->
        <div class="logo" style="justify-content:center;">
          <span>ðŸŒ¿</span>
          SafraSmart
        </div>
        <div class="landing-subtitle">Envie o shapefile para gerar o mapa NDVI.</div>

        <!-- Upload form -->
        <form method="post" action="/submit" enctype="multipart/form-data" class="landing-form">
          <div>
            <label for="aoi_files">Shapefile (.zip)</label>
            <input type="file" id="aoi_files" name="aoi_files" accept=".zip" required />
          </div>
          <div>
            <label for="initial_date">Data inicial</label>
            <input type="date" id="initial_date" name="initial_date" required />
          </div>
          <div>
            <label for="end_date">Data final (opcional)</label>
            <input type="date" id="end_date" name="end_date" />
          </div>
          <div>
            <label for="cloud_pixel_percentage">Cobertura de nuvens</label>
            <input type="range" id="cloud_pixel_percentage" name="cloud_pixel_percentage" min="30" max="100" step="5" value="40" />
            <div class="slider-meta">
              <span id="cloud_value">40%</span>
              <span class="slider-tip">Recomendado: 30-40%</span>
            </div>
          </div>
          <div>
            <label for="accessibility">Paleta</label>
            <select id="accessibility" name="accessibility">
              <option value="Normal">Normal</option>
              <option value="Deuteranopia">Deuteranopia</option>
              <option value="Protanopia">Protanopia</option>
              <option value="Tritanopia">Tritanopia</option>
              <option value="Achromatopsia">Achromatopsia</option>
            </select>
          </div>
          <button class="primary" type="submit">Gerar mapa</button>
        </form>

        <!-- Validation errors -->
        {% if form_errors %}
          <div class="errors">
            {% for err in form_errors %}
              <div class="error">{{ err }}</div>
            {% endfor %}
          </div>
        {% endif %}
      </div>
    </div>
    <script>
      (function () {
        const slider = document.getElementById('cloud_pixel_percentage');
        const label = document.getElementById('cloud_value');
        if (!slider || !label) return;
        const update = () => { label.textContent = `${slider.value}%`; };
        slider.addEventListener('input', update);
        update();
      }());
    </script>
  </body>
</html>
